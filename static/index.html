<?xml encoding='utf-8' version='1.0'?>
<html>
 <body>
  <h1>BrewGear &pi;</h1>

  <div id="chart" style="width:100%; height:400px;"></div>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
  <script src="http://code.highcharts.com/highcharts.js"></script>

  <script type="text/javascript">
$(function () {
        $('#chart').highcharts({
            chart: {
                zoomType: 'xy',
                type: 'spline',
                animation: Highcharts.svg, // don't animate in old IE
                marginRight: 10,
                events: {
                    load: function() {
                        // set up the updating of the chart each second
                        var series = this.series[0];
                        setInterval(function() {
                            var x = (new Date()).getTime(), // current time
                                y = Math.random();
                            series.addPoint([x, y], true, true);
                        }, 2000);
                    }
                }
            },

            title: {
                text: 'Mash'
            },
            legend: {
                enabled: false
            },
            xAxis: [{
                type: 'datetime',
                title: {
                    text: 'Time',
                },
                dateTimeLabelFormats: {
                    month: '%M:%S',
                    year: '%b'
                }
            }],
            yAxis: [{
                labels: {
                    style: {
                        color: '#89A54E'
                    }
                },
                title: {
                    text: 'Temperature',
                    style: {
                        color: '#89A54E'
                    }
                }
            }, {
                gridLineWidth: 0,
                type: 'area',
                title: {
                    text: 'Heater',
                    style: {
                        color: '#4572A7'
                    },
                },
                labels: {
                    formatter: function() {
                        return this.value === 0 ? 'Off' : (this.value === 1 ? 'On' : '');
                    },
                    style: {
                        color: '#4572A7'
                    },
                    tickInterval: 1
                },
                min: 0,
                max: 1,
                opposite: true
            }],
            tooltip: {
                shared: true
            },
            plotOptions: {
		series: {
		    stacking: null
		}
	    },
            series: [{
                name: 'Temperature',
                color: '#89A54E',
                data: [
		    [Date.parse('2013-05-05T13:47:02'), 7.0],
		    [Date.parse('2013-05-05T13:47:07'), 7.1],
		    [Date.parse('2013-05-05T13:47:12'), 7.2],
		    [Date.parse('2013-05-05T13:47:17'), 7.3],
		    [Date.parse('2013-05-05T13:47:22'), 7.1],
		    [Date.parse('2013-05-05T13:47:27'), 7.2],
		    [Date.parse('2013-05-05T13:47:32'), 7.3],
		    [Date.parse('2013-05-05T13:47:42'), 7.9],
		    [Date.parse('2013-05-05T13:47:52'), 7.7],
		    [Date.parse('2013-05-05T13:47:57'), 7.5]
                ],
                tooltip: {
                    valueSuffix: ' Â°C'
                }
            }, {
                name: 'Heater',
                color: '#4572A7',
                yAxis: 1,
                data: [
		    [Date.parse('2013-05-05T13:47:02'), 0],
		    [Date.parse('2013-05-05T13:47:07'), 1],
		    [Date.parse('2013-05-05T13:47:12'), 1],
		    [Date.parse('2013-05-05T13:47:17'), 1],
		    [Date.parse('2013-05-05T13:47:22'), 1],
		    [Date.parse('2013-05-05T13:47:27'), 0],
		    [Date.parse('2013-05-05T13:47:32'), 0],
		    [Date.parse('2013-05-05T13:47:42'), 1],
		    [Date.parse('2013-05-05T13:47:52'), 1],
		    [Date.parse('2013-05-05T13:47:57'), 0]
                ],
            }]
        });
    });
  </script>
 </body>
</html>
